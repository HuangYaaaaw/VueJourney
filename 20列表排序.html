<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="../vue2.js"></script>
</head>

<body>
    <div id="root">
        <h2>列表筛选</h2>
        <input type="text" v-model="keyword">
        <button @click="sortType=0">年龄升序</button>
        <button @click="sortType=1">年龄降序</button>
        <button @click="sortType=2">原本顺序</button>
        <!-- 观察输入框里面的东西是否改变，如果改变就刷新fliperson,更新页面 -->
        <ul>
            <li v-for="p in filpersons" :key="p.id">{{ p.name }} - {{ p.age }} - {{ p.sex }}</li>
        </ul>
    </div>
    <script>
        new Vue({
            el: '#root',
            data: {
                keyword: '',
                persons: [
                    { id: '@01', name: '马冬梅', age: 5, sex: '女' },
                    { id: '@02', name: '周冬雨', age: 30, sex: '女' },
                    { id: '@03', name: '周杰伦', age: 1, sex: '男' },
                    { id: '@04', name: '温兆伦', age: 22, sex: '男' }
                ],
                sortType:0
            },
            computed:{
                //列表过滤一般跟列表排序写在一起,当所有的操作都做完之后再返回，提高效率
                filpersons(){
                    const arr=this.persons.filter(item=>{return item.name.indexOf(this.keyword)!=-1})
                    if(this.sortType!=2){
                        arr.sort((a, b) => {
                            return this.sortType===1?a.age - b.age:b.age-a.age
                        });
                    }
                    return arr
                }
            }

        }
        )
    </script>
</body>

</html>